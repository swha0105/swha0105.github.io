---
layout: post
title:  "Prediction of baseball game result by Random forest"
subtitle:  "Legal TOTO"
categories: projects
tags: projects
comments: true
---


# ToTo Project


<br/>

## 개요
2019년 6~7월쯤 예전에 다니던 회사에서 야구좋아하는 친한동료들끼리 언제나처럼 수다떨다가 아이디어가 나왔다.  
야구는 스포츠중 데이터가 잘 정리되어있고 수치화하기 쉬워 이러한 데이터를 가지고 경기 결과를 예측하는 모델을 구축하면 잘 될꺼같다, 이걸로 합법토토인 배트맨토토를 해보자 라는 말이 오고갔었다.  
하지만.. 9월에 퇴사하고 울산으로 귀양(?)가는 바람에 아이디어만 오고갔고 제대로 구체화 된건 없었다. 그렇게 잊고 지내다가 반백수처럼 지내는 요즘 이 아이디어를 구체화시킬 기회라 생각하여 작업중에 있다.

<br/>


---

## 아이디어

### 데이터 베이스 구축 -> 전처리 -> Random forest -> 후처리 및 결과예측

<br/>

**1. 데이터 베이스 구축**

데이터 처리의 기본은 역시 데이터를 모으는것이다. 동료가 크롤링 스켈레톤 코드를 구축해줘서 이걸 바탕으로 스탯티즈 홈페이지의 데이터들을 크롤링 하는 코드를 구성했다. ~~크롤링 첨해봄~~    


**2. 전처리**

날짜별로 타순에 따른 타자, 선발투수, 팀 정보들을 구성한다. 
타율, OPS, 최근 몇경기 평균자책과 같은 데이터들을 다 포함한한 뒤 상대팀 데이터와 함께 한 경기에 대한 데이터를 구성한다. 

**3. Random forest**

경기별로 각 팀의 타자,선발투수, 팀 정보과 같은 Feature들을 구성한다. 예측해야될 feature는 각 팀의 득점으로 할지, 승패로 해야할지는 시도해보고 결정해야 할듯 하다.

Random forest는 옛날에 하드코딩으로 구성해봤지만 요즘 scikit learn이나 lightGBM이 너무 잘되어있어서 아마 여기 있는 모델을 사용할꺼같다.

<br/>

## 현재 진행상황

~~**데이터 베이스 구축** 은 거의 끝났다. 현재 2017년부터 시행된 경기정보 (선발투수, 최근 경기 팀 정보, 배팅오더)를 다 크롤링 하였다.   
하지만 스탯티즈의 타자 통산기록에 오류가 있는듯하여 문의를 넣었고 이를 고쳐주는대로 타자 데이터를 크롤링하여 데이터 베이스 구축을 완료 할 것이다.~~

여러 문제로 문제를 다시 접근하는 중이다.  
먼저, 어떤 데이터들이 나중에 필요할지 몰라 html들을 모두 긁어온 상태이다. 왠지 statiz 서버에 많은 부하를 넣는게 마음에 걸려서 일단 한번에 다 데이터를 수집하였고 현재 가공중에 있다. 




